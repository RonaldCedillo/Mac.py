import network
from machine import Pin
import espnow
import utime

sta = network.WLAN(network.STA_IF) 
sta.active(True)
sta.disconnect()

esp = espnow.ESPNow()
esp.active(True)

peer = b'\xe4e\xb8\x84\x00 '#(Direccion mac de su esp32)
esp.add_peer(peer)

button_pin = Pin(23, Pin.IN, Pin.PULL_UP)

last_button_state = 1
debounce_delay = 50

while True:
    current_button_state = button_pin.value()
    
    if current_button_state != last_button_state:
        utime.sleep_ms(debounce_delay)
        
        current_button_state = button_pin.value()
        
        if current_button_state != last_button_state:
            if current_button_state == 0:
                message = "Led On"
                print(f"Sending comand : {message}")
                esp.send(peer, message)
                
            else:
                message ="Led Off"
                print(f"Sending comand : {message}")
                esp.send(peer, message)
                
                
        last_button_state = current_button_state
